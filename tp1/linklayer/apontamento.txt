enquanto nao tiver superado o numero de tentativas
    escrever o frame seq(X)
    ligar alarme de 3 segundos
    enquanto nao tiver dado timeout
        ler byte
        se stop state
            se o frame recebido for ACK(Y)
                desligar alarme
                proximo frame tem seq(Y)
                retornar bytes escritos
        